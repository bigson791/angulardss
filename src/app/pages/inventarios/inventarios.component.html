<h4 class="mb-3">Movimientos de Inventario</h4>

<div class="row mb-3">
    <div class="col-md-4">
        <label>Producto</label>
        <select class="form-select" [(ngModel)]="filtro.idProducto">
            <option value="">-- Todos --</option>
            <option *ngFor="let prod of productos" [value]="prod._id">{{ prod.nombre }}</option>
        </select>
    </div>
    <div class="col-md-3">
        <label>Desde</label>
        <input class="form-control" type="date" [(ngModel)]="filtro.inicio">
    </div>
    <div class="col-md-3">
        <label>Hasta</label>
        <input class="form-control" type="date" [(ngModel)]="filtro.fin">
    </div>
    <div class="col-md-2 d-flex align-items-end gap-2">
        <button class="btn btn-primary w-100" (click)="buscar()"><i class="fab fa-searchengin"></i> Buscar</button>
        <button class="btn btn-secondary w-100" (click)="limpiarFiltros()"> <i class="fas fa-broom"></i>Limpiar</button>
    </div>
</div>

<table class="table table-bordered table-sm table-hover">
    <thead class="table-dark">
        <tr>
            <th>Fecha</th>
            <th>Producto</th>
            <th>Tipo</th>
            <th>Cantidad</th>
            <th>Observaci√≥n</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let mov of movimientosFiltrados">
            <td>{{ mov.fecha | date: 'shortDate' }}</td>
            <td>{{ mov.producto?.nombre }}</td>
            <td>{{ mov.tipo }}</td>
            <td>{{ mov.cantidad }}</td>
            <td>{{ mov.observacion || '-' }}</td>
        </tr>
        <tr *ngIf="movimientosFiltrados.length === 0">
            <td colspan="5" class="text-center text-muted">No se encontraron movimientos.</td>
        </tr>
    </tbody>
    <div *ngIf="stock > 0">
  <span>Saldo del producto a la fecha {{ filtro.fin! | date: 'shortDate' }}:<strong>
    {{ stock }}
  </strong></span>    </div>
</table>